\documentclass[../main.tex]{subfiles}
\begin{document}

\section{Git 工作流}

Git作为一种强大的分布式版本控制系统，如果使用时的工作流程分支策略不当，便会导致版本控制的混乱，从而影响团队的协作效率。
因此，Git 工作流是Git的一个重要特性。
下面将介绍Git的几种常见工作流及其优缺点。

\subsection{传统工作流}

经典的 Git 工作流以 Gitflow 为代表。

Gitflow是最早提出的分支模型之一，由Vincent Driessen 在 nvie 上首次提出\cite{gitflow}，
主要针对采用集中式工作流的项目。
Gitflow 工作流同时使用两种长期分支：main 和 develop。
main 分支用于存放稳定版本，develop 分支用于存放开发版本。
每个新特性都在自己的功能分支上开发，开发完成后合并到 develop 分支。功能分支不与 main 分支直接交互。
当 develop 分支上的新功能开发完成后，先从 develop 分支分离出 release 分支。
当 release 分支准备好发布时，最终合并到 main 分支并打上标签。

Gitflow 工作流的优点是分支模型清晰，适合基于版本发布的项目，但需要同时维护多个长期分支，相对复杂。
并且， Gitflow 的开发分支是固定的，难以针对不同功能进行集成化测试。

\subsection{主干-分支工作流}

主干-分支模型，或基于主干的工作流（trunk-based workflow），是一种更加简化、灵活的分支模型，被许多大型的开发组织，如谷歌和脸书所采用\cite{trunkbased}。

在基于主干的分支模型下，一切发布和修复都是围绕主干进行的。
开发者不断创建新的功能分支，完成后合并到主干。
当需要发布新版本时，从主干分离出新的发布分支，进行发布。
许多广泛应用的工作流，如 GitHub Flow 和 GitLab Flow，都采用了基于主干的分支模型。

基于主干的分支模型可以带来很多好处。例如并行的功能分支有利于持续集成，减少代码集成中产生的摩擦，保证持续的代码审查和发布等等。

\subsection{分布式工作流程}

Git 作为分布式版本管理系统，开发者间的协作方式是灵活多样的。
根据每个开发者角色的不同，可以产生不同的工作流程。
常见的的有集中式工作流、集成管理者工作流、主管与副主管工作流。

集中式工作流是一种简单的工作流。一个中心仓库接受所有开发者的代码并与中心仓库同步。
如果两个开发者同时克隆了中心仓库的代码并做了一些修改，那么只有第一个开发者能提交修改，第二个开发者提交前必须先将第一个人的工作合并。
这种模式的使用非常广泛，小团队和大团队都可以采取这种方式进行协作。

集成管理者工作流是一种更加复杂的工作流，每个开发者拥有自己仓库的写权限和所有仓库的读权限。
往往有一个中心的“权威”仓库，所有开发者克隆这个仓库，在自己的仓库中进行工作，然后请求将自己的工作合并进这个仓库。
这是GitHub和GitLab等工具的常用工作流，可以方便实现持续性的社区协作。

主管与副主管工作流一般只有超大型项目（例如Linux内核）才会采用。一位主管负责管理统筹整个项目，维护一个参考仓库。多个副主管分别负责项目中的特定部分，维护自己的分支以便合并进主管的仓库。
这种方式并不十分常见，但是在大型项目中可以保证项目的稳定性。

\end{document}
